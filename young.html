<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="http://underscorejs.org/underscore-min.js" charset="utf-8"></script>
	<style type="text/css" media="screen">
	body{
		font: 150% "Helvetica";
	}
	h1{
		text-align:center;
	}
	.canvas{
		width:80%;
		margin-left:auto;
		margin-right:auto;
		display:block;
		border:1px solid black;
		background-color:#eee;
		height:500px;
	}
	.boxfill{
		font: 150% "Helvetica";
	}
	.box{
		fill:white;
		stroke:black;
	}

	</style>
</head>
<body>
	<h1>Young Tableaux</h1>
	<svg class="canvas"></svg>
	<script type="text/javascript" charset="utf-8">

	var scale = d3.scale.linear().domain([0,10]).range([0,600])

	function addbox(boxes){
		var box = boxes.append("g");

		box.attr("class","boxgroup");

		box.append("rect")
			.attr("x",function(d,i,j){return scale(i);})
			.attr("y",function(d,i,j){return scale(j);})
			.attr("height",scale(1))
			.attr("width",scale(1))
			.attr("class","box");
		box.append("text")
			.attr("x",function(d,i,j){return scale(i);})
			.attr("y",function(d,i,j){return scale(j);})
			.attr("text-anchor","middle")
			.attr("alignment-baseline","central")
			.attr("dx", scale(0.5))
			.attr("dy", scale(0.5))
			.attr("class","boxfill")
			.text(function(d){return d;});
		return box;
	}

	function mktbl(canvas,id,tab,pos){
		var tbl = canvas.append("g");
		var boxes = tbl
			.attr("id",id)
			.attr("transform","translate("+scale(pos[0])+","+scale(pos[1])+")")
			.selectAll("g g").data(tab)
			.enter()
			.append("g")
			.attr("class","row")
			.selectAll("g").data(function(d,i,j){return d;})
			.enter().call(addbox)
		return d3.selectAll("#"+id);
	}

	function newbox(boxes){
		var b = addbox(boxes)
				.style("opacity","0");
		b.selectAll("rect").style("fill","red")
		b.transition().duration(1500)
		 .style("opacity","1")
		b.selectAll("rect").transition().delay(1500).duration(500).style("fill","white");
	}
	
	tab1 = [[,,],[,]];
	tab2 = [[1,1,],[2,]];
	var canvas = d3.selectAll(".canvas");
	
	mktbl(canvas,"tab1",tab1,[1,1]);
	mktbl(canvas,"tab2",tab2,[6,1]);


	function update(id,data){
		m = d3.select(id).selectAll(".row").data(data)
			.selectAll(".boxgroup").data(function(d){return d;});
		m.enter().call(newbox);
		m.exit().style("opacity","1").transition().duration(1500).style("opacity","0");
	}

	one = [[,,1],[,]]
	two = [[1,],[2,]]


	mktbl(canvas,"tab3",tab1,[1,5]);
	a = mktbl(canvas,"tab4",tab2,[6,5]);

	a.transition().attr("transform","translate("+scale(7)+","+scale(5)+")")


	update("#tab3",one);
	update("#tab4",two);

	</script>
</body>
</html>